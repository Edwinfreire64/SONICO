<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SONICO</title>
    <style>
        /* Estilos b√°sicos de la p√°gina */
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: url('images/sonico-background.png') no-repeat center center;
            background-size: cover;
            color: white;
            margin: 0;
            overflow-x: hidden;
        }
        header {
            padding: 20px;
            font-size: 18px;
            background: rgba(0, 0, 0, 0.8);
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 1000;
        }
        .container {
            max-width: 820px;
            margin: 100px auto;
            padding: 20px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
        }
        .section {
            padding: 50px 20px;
            border-bottom: 1px solid #333;
            opacity: 1;
            transform: translateY(50px);
        }
        .btn {
            background: #ff9800;
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.2s;
            margin: 10px;
        }
        .btn:hover {
            background: #e68900;
            transform: scale(1.05);
        }
        .hero {
            background: url('sonico-banner.jpg') no-repeat center center/cover;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
        }
        .logo {
            width: 150px;
            height: 150px;
            margin: 20px auto;
            background: url('images/sonico-logo.png') no-repeat center center/contain;
        }
        .error {
            color: red;
        }
        .loading {
            color: yellow;
        }
    </style>
</head>
<body>
    <header>
        <h1>SONICO</h1>
    </header>
    
    <div class="hero">¬°√önete a la Revoluci√≥n Sonico!</div>
    
    <div class="logo"></div>
    
    <div class="container">
        <section class="section">
            <h2>Compra Sonico</h2>
            <button class="btn" id="connectWallet">Conectar MetaMask</button>
            <button class="btn" id="connectPancakeSwap">Conectar con PancakeSwap</button>
            <button class="btn" id="buyWithUSDT">Comprar con USDT</button>
            <button class="btn" id="buyWithBNB">Comprar con BNB</button>
            <p id="status"></p>
            <p id="error" class="error"></p>
            <p id="loading" class="loading" style="display: none;">Cargando...</p>
        </section>
        
        <section class="section roadmap">
            <h2>Roadmap</h2>
            <p>Este es nuestro camino hacia el futuro de Sonico. Cada fase est√° dise√±ada para asegurar un crecimiento sostenido y una adopci√≥n masiva.</p>
            <ul>
                <li>‚úÖ Lanzamiento: Nuestro token ha sido lanzado oficialmente en plataformas de intercambio.</li>
                <li>üöÄ Integraci√≥n en Exchange: Trabajamos para integrar Sonico en varios exchanges para mayor accesibilidad.</li>
                <li>üî• Marketing y Expansi√≥n: Nos enfocaremos en la expansi√≥n del ecosistema y campa√±as de marketing para alcanzar nuevos usuarios.</li>
            </ul>
        </section>
        
        <section class="section tokenomics">
            <h2>Tokenomics</h2>
            <p><strong>Suministro Total:</strong> 150,000,000,000 SONICO</p>
            <p><strong>Distribuci√≥n:</strong> 50% Preventa, 30% Liquidez, 20% Desarrollo</p>
            <p>Sonico se distribuye estrat√©gicamente para garantizar su sostenibilidad y crecimiento continuo. La preventa es la primera etapa clave, seguida por la liquidez para asegurar la estabilidad del mercado.</p>
        </section>
        
    </div>

    <script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.min.js"></script>
    <script>
        const tokenAddress = "0xTuToken";
        const pancakeRouterAddress = "0x05fF4E249A6B8a298Fdd37eF82ddA5e7d5F1F4aB"; // PancakeSwap Router
        const usdtAddress = "0xdac17f958d2ee523a2206206994597c13d831ec7"; // USDT address
        let userAddress;

        // ABI de PancakeSwap Router
        const PancakeRouter_ABI = [
            {
                "inputs": [
                    { "internalType": "address", "name": "tokenIn", "type": "address" },
                    { "internalType": "address", "name": "tokenOut", "type": "address" },
                    { "internalType": "uint256", "name": "amountIn", "type": "uint256" },
                    { "internalType": "uint256", "name": "amountOutMin", "type": "uint256" },
                    { "internalType": "address[]", "name": "path", "type": "address[]" },
                    { "internalType": "address", "name": "to", "type": "address" },
                    { "internalType": "uint256", "name": "deadline", "type": "uint256" }
                ],
                "name": "swapExactTokensForTokens",
                "outputs": [{ "internalType": "uint256[]", "name": "", "type": "uint256[]" }],
                "stateMutability": "nonpayable",
                "type": "function"
            }
        ];

        // ABI de ERC20 (USDT)
        const ERC20_ABI = [
            {
                "constant": true,
                "inputs": [{ "name": "account", "type": "address" }],
                "name": "balanceOf",
                "outputs": [{ "name": "", "type": "uint256" }],
                "payable": false,
                "stateMutability": "view",
                "type": "function"
            },
            {
                "constant": false,
                "inputs": [{ "name": "spender", "type": "address" }, { "name": "amount", "type": "uint256" }],
                "name": "approve",
                "outputs": [{ "name": "", "type": "bool" }],
                "payable": false,
                "stateMutability": "nonpayable",
                "type": "function"
            }
        ];

        async function connectWallet() {
            document.getElementById("error").innerText = "";
            document.getElementById("loading").style.display = "inline";
            
            if (window.ethereum) {
                const web3 = new Web3(window.ethereum);
                try {
                    await window.ethereum.request({ method: "eth_requestAccounts" });
                    const accounts = await web3.eth.getAccounts();
                    userAddress = accounts[0];
                    document.getElementById("status").innerText = "Conectado: " + userAddress;
                    document.getElementById("loading").style.display = "none";
                    document.getElementById("error").innerText = "";
                } catch (error) {
                    document.getElementById("error").innerText = "Error al conectar la wallet. Intenta de nuevo.";
                    document.getElementById("loading").style.display = "none";
                }
            } else {
                alert("Por favor, instala MetaMask");
                document.getElementById("loading").style.display = "none";
            }
        }

        async function buyWithUSDT() {
            const web3 = new Web3(window.ethereum);
            const router = new web3.eth.Contract(PancakeRouter_ABI, pancakeRouterAddress);
            const usdt = new web3.eth.Contract(ERC20_ABI, usdtAddress);
            const amountIn = web3.utils.toWei("100", "mwei"); // 100 USDT (USDT tiene 6 decimales)

            try {
                // Aprobar USDT para PancakeSwap Router
                await usdt.methods.approve(pancakeRouterAddress, amountIn).send({ from: userAddress });

                const path = [usdtAddress, tokenAddress]; // USDT -> SONICO
                const deadline = Math.floor(Date.now() / 1000) + 60 * 20; // 20 minutos de deadline

                await router.methods.swapExactTokensForTokens(amountIn, 0, path, userAddress, deadline)
                    .send({ from: userAddress });
                
                alert("Compra realizada con √©xito");
            } catch (error) {
                document.getElementById("error").innerText = "Error al realizar la compra con USDT.";
            }
        }

        async function buyWithBNB() {
            const web3 = new Web3(window.ethereum);
            const router = new web3.eth.Contract(PancakeRouter_ABI, pancakeRouterAddress);
            const amountIn = web3.utils.toWei("0.1", "ether"); // 0.1 BNB

            try {
                const path = [web3.utils.toChecksumAddress("0xBB4CdB9CBd36B01bD1cBaEBF2De08d9173bA847D"), tokenAddress]; // BNB -> SONICO
                const deadline = Math.floor(Date.now() / 1000) + 60 * 20;

                await router.methods.swapExactETHForTokens(0, path, userAddress, deadline)
                    .send({ from: userAddress, value: amountIn });

                alert("Compra realizada con √©xito");
            } catch (error) {
                document.getElementById("error").innerText = "Error al realizar la compra con BNB.";
            }
        }

        function connectToPancakeSwap() {
            const url = "https://pancakeswap.finance/swap?outputCurrency=" + tokenAddress;
            window.open(url, "_blank");
        }

        document.getElementById("connectWallet").addEventListener("click", connectWallet);
        document.getElementById("connectPancakeSwap").addEventListener("click", connectToPancakeSwap);
        document.getElementById("buyWithUSDT").addEventListener("click", buyWithUSDT);
        document.getElementById("buyWithBNB").addEventListener("click", buyWithBNB);
    </script>
</body>
</html>
